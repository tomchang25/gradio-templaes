{"version":3,"file":"index-566b59c2.js","sources":["../../../../js/icons/src/Brush.svelte","../../../../js/icons/src/Color.svelte","../../../../js/icons/src/Sketch.svelte","../../../../js/image/src/utils.ts","../../../../js/image/src/Cropper.svelte","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/Point.js","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyPoint.js","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyBrush.js","../../../../js/image/src/Sketch.svelte","../../../../js/image/src/ModifySketch.svelte","../../../../js/image/src/SketchSettings.svelte","../../../../js/image/src/Image.svelte","../../../../js/image/src/StaticImage.svelte","../../../../js/app/src/components/Image/Image.svelte","../../../../js/app/src/components/Image/index.ts"],"sourcesContent":["<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\r\n\t<path\r\n\t\td=\"M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z\"\r\n\t\tfill=\"currentColor\"\r\n\t/>\r\n\t<path\r\n\t\td=\"M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z\"\r\n\t\tfill=\"currentColor\"\r\n\t/>\r\n</svg>\r\n","<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\r\n\t<circle cx=\"10\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\r\n\t<circle cx=\"16\" cy=\"9\" r=\"2\" fill=\"currentColor\" />\r\n\t<circle cx=\"22\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\r\n\t<circle cx=\"23\" cy=\"18\" r=\"2\" fill=\"currentColor\" />\r\n\t<circle cx=\"19\" cy=\"23\" r=\"2\" fill=\"currentColor\" />\r\n\t<path\r\n\t\tfill=\"currentColor\"\r\n\t\td=\"M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z\"\r\n\t/>\r\n</svg>\r\n","<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\twidth=\"100%\"\r\n\theight=\"100%\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tfill=\"none\"\r\n\tstroke=\"currentColor\"\r\n\tstroke-width=\"1.5\"\r\n\tstroke-linecap=\"round\"\r\n\tstroke-linejoin=\"round\"\r\n\tclass=\"feather feather-edit-2\"\r\n>\r\n\t<path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\" />\r\n</svg>\r\n","export const get_coordinates_of_clicked_image = (\r\n\tevt: MouseEvent\r\n): [number, number] | null => {\r\n\tlet image = evt.currentTarget as HTMLImageElement;\r\n\r\n\tconst imageRect = image.getBoundingClientRect();\r\n\tconst xScale = image.naturalWidth / imageRect.width;\r\n\tconst yScale = image.naturalHeight / imageRect.height;\r\n\tif (xScale > yScale) {\r\n\t\tconst displayed_width = imageRect.width;\r\n\t\tconst displayed_height = image.naturalHeight / xScale;\r\n\t\tconst y_offset = (imageRect.height - displayed_height) / 2;\r\n\t\tvar x = Math.round((evt.clientX - imageRect.left) * xScale);\r\n\t\tvar y = Math.round((evt.clientY - imageRect.top - y_offset) * xScale);\r\n\t} else {\r\n\t\tconst displayed_width = image.naturalWidth / yScale;\r\n\t\tconst displayed_height = imageRect.height;\r\n\t\tconst x_offset = (imageRect.width - displayed_width) / 2;\r\n\t\tvar x = Math.round((evt.clientX - imageRect.left - x_offset) * yScale);\r\n\t\tvar y = Math.round((evt.clientY - imageRect.top) * yScale);\r\n\t}\r\n\tif (x < 0 || x >= image.naturalWidth || y < 0 || y >= image.naturalHeight) {\r\n\t\treturn null;\r\n\t}\r\n\treturn [x, y];\r\n};\r\n","<svelte:options accessors={true} />\r\n\r\n<script lang=\"ts\">\r\n\timport Cropper from \"cropperjs\";\r\n\timport { onMount, createEventDispatcher } from \"svelte\";\r\n\r\n\texport let image: string;\r\n\tlet el: HTMLImageElement;\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\tlet cropper: Cropper;\r\n\r\n\texport function destroy() {\r\n\t\tcropper.destroy();\r\n\t}\r\n\r\n\texport function create() {\r\n\t\tif (cropper) {\r\n\t\t\tdestroy();\r\n\t\t}\r\n\t\tcropper = new Cropper(el, {\r\n\t\t\tautoCropArea: 1,\r\n\t\t\tcropend() {\r\n\t\t\t\tconst image_data = cropper.getCroppedCanvas().toDataURL();\r\n\t\t\t\tdispatch(\"crop\", image_data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdispatch(\"crop\", image);\r\n\t}\r\n</script>\r\n\r\n<img src={image} bind:this={el} alt=\"\" />\r\n","class Point {\n  /**\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n}\n\nexport default Point\n","import Point from './Point'\n\nclass LazyPoint extends Point {\n  /**\n   * Update the x and y values\n   *\n   * @param {Point} point\n   */\n  update (point) {\n    this.x = point.x\n    this.y = point.y\n  }\n\n  /**\n   * Move the point to another position using an angle and distance\n   *\n   * @param {number} angle The angle in radians\n   * @param {number} distance How much the point should be moved\n   */\n  moveByAngle (angle, distance) {\n    // Rotate the angle based on the browser coordinate system ([0,0] in the top left)\n    const angleRotated = angle + (Math.PI / 2)\n\n    this.x = this.x + (Math.sin(angleRotated) * distance),\n    this.y = this.y - (Math.cos(angleRotated) * distance)\n  }\n\n  /**\n   * Check if this point is the same as another point\n   *\n   * @param {Point} point\n   * @returns {boolean}\n   */\n  equalsTo (point) {\n    return this.x === point.x && this.y === point.y\n  }\n\n  /**\n   * Get the difference for x and y axis to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDifferenceTo (point) {\n    return new Point(this.x - point.x, this.y - point.y)\n  }\n\n  /**\n   * Calculate distance to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDistanceTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.sqrt(Math.pow(diff.x, 2) + Math.pow(diff.y, 2))\n  }\n\n  /**\n   * Calculate the angle to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getAngleTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.atan2(diff.y, diff.x)\n  }\n\n  /**\n   * Return a simple object with x and y properties\n   *\n   * @returns {object}\n   */\n  toObject () {\n    return {\n      x: this.x,\n      y: this.y\n    }\n  }\n}\n\nexport default LazyPoint\n","import LazyPoint from './LazyPoint'\nconst RADIUS_DEFAULT = 30\n\nclass LazyBrush {\n  /**\n   * constructor\n   *\n   * @param {object} settings\n   * @param {number} settings.radius The radius for the lazy area\n   * @param {boolean} settings.enabled\n   */\n  constructor ({ radius = RADIUS_DEFAULT, enabled = true, initialPoint = { x: 0, y: 0 }} = {}) {\n    this.radius = radius\n    this._isEnabled = enabled\n\n    this.pointer = new LazyPoint(initialPoint.x, initialPoint.y)\n    this.brush = new LazyPoint(initialPoint.x, initialPoint.y)\n\n    this.angle = 0\n    this.distance = 0\n    this._hasMoved = false\n  }\n\n  /**\n   * Enable lazy brush calculations.\n   *\n   */\n  enable () {\n    this._isEnabled = true\n  }\n\n  /**\n   * Disable lazy brush calculations.\n   *\n   */\n  disable () {\n    this._isEnabled = false\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isEnabled () {\n    return this._isEnabled\n  }\n\n  /**\n   * Update the radius\n   *\n   * @param {number} radius\n   */\n  setRadius (radius) {\n    this.radius = radius\n  }\n\n  /**\n   * Return the current radius\n   *\n   * @returns {number}\n   */\n  getRadius () {\n    return this.radius\n  }\n\n  /**\n   * Return the brush coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getBrushCoordinates () {\n    return this.brush.toObject()\n  }\n\n  /**\n   * Return the pointer coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getPointerCoordinates () {\n    return this.pointer.toObject()\n  }\n\n  /**\n   * Return the brush as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getBrush () {\n    return this.brush\n  }\n\n  /**\n   * Return the pointer as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getPointer () {\n    return this.pointer\n  }\n\n  /**\n   * Return the angle between pointer and brush\n   *\n   * @returns {number} Angle in radians\n   */\n  getAngle () {\n    return this.angle\n  }\n\n  /**\n   * Return the distance between pointer and brush\n   *\n   * @returns {number} Distance in pixels\n   */\n  getDistance () {\n    return this.distance\n  }\n\n  /**\n   * Return if the previous update has moved the brush.\n   *\n   * @returns {boolean} Whether the brush moved previously.\n   */\n  brushHasMoved () {\n    return this._hasMoved\n  }\n\n  /**\n   * Updates the pointer point and calculates the new brush point.\n   *\n   * @param {Point} newPointerPoint\n   * @param {Object} options\n   * @param {Boolean} options.both Force update pointer and brush\n   * @returns {Boolean} Whether any of the two points changed\n   */\n  update (newPointerPoint, { both = false } = {}) {\n    this._hasMoved = false\n    if (this.pointer.equalsTo(newPointerPoint) && !both) {\n      return false\n    }\n\n    this.pointer.update(newPointerPoint)\n\n    if (both) {\n      this._hasMoved = true\n      this.brush.update(newPointerPoint)\n      return true\n    }\n\n    if (this._isEnabled) {\n      this.distance = this.pointer.getDistanceTo(this.brush)\n      this.angle = this.pointer.getAngleTo(this.brush)\n\n      if (this.distance > this.radius) {\n        this.brush.moveByAngle(this.angle, this.distance - this.radius)\n        this._hasMoved = true\n      }\n    } else {\n      this.distance = 0\n      this.angle = 0\n      this.brush.update(newPointerPoint)\n      this._hasMoved = true\n    }\n\n    return true\n  }\n}\n\nexport default LazyBrush\n\n","<script>\r\n\t// @ts-nocheck\r\n\r\n\timport { onMount, onDestroy, createEventDispatcher, tick } from \"svelte\";\r\n\timport { fade } from \"svelte/transition\";\r\n\timport { LazyBrush } from \"lazy-brush/src\";\r\n\timport ResizeObserver from \"resize-observer-polyfill\";\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\texport let value;\r\n\texport let value_img;\r\n\texport let mode = \"sketch\";\r\n\texport let brush_color = \"#0b0f19\";\r\n\texport let brush_radius;\r\n\texport let source;\r\n\r\n\texport let width = 400;\r\n\texport let height = 200;\r\n\texport let container_height = 200;\r\n\texport let shape;\r\n\r\n\t$: {\r\n\t\tif (shape && (width || height)) {\r\n\t\t\twidth = shape[0];\r\n\t\t\theight = shape[1];\r\n\t\t}\r\n\t}\r\n\r\n\tlet mounted;\r\n\r\n\tlet catenary_color = \"#aaa\";\r\n\r\n\tlet canvas_width = width;\r\n\tlet canvas_height = height;\r\n\r\n\t$: mounted && !value && clear();\r\n\r\n\tlet last_value_img;\r\n\r\n\t$: {\r\n\t\tif (mounted && value_img !== last_value_img) {\r\n\t\t\tlast_value_img = value_img;\r\n\r\n\t\t\tclear();\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (source === \"webcam\") {\r\n\t\t\t\t\tctx.temp.save();\r\n\t\t\t\t\tctx.temp.translate(width, 0);\r\n\t\t\t\t\tctx.temp.scale(-1, 1);\r\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\r\n\t\t\t\t\tctx.temp.restore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdraw_cropped_image();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n\t\t\t\tdraw_lines({ lines: lines.slice() });\r\n\t\t\t\ttrigger_on_change();\r\n\t\t\t}, 50);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mid_point(p1, p2) {\r\n\t\treturn {\r\n\t\t\tx: p1.x + (p2.x - p1.x) / 2,\r\n\t\t\ty: p1.y + (p2.y - p1.y) / 2\r\n\t\t};\r\n\t}\r\n\r\n\tconst canvas_types = [\r\n\t\t{\r\n\t\t\tname: \"interface\",\r\n\t\t\tzIndex: 15\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"drawing\",\r\n\t\t\tzIndex: 11\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"temp\",\r\n\t\t\tzIndex: 12\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"mask\",\r\n\t\t\tzIndex: -1\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"temp_fake\",\r\n\t\t\tzIndex: -2\r\n\t\t}\r\n\t];\r\n\r\n\tlet canvas = {};\r\n\tlet ctx = {};\r\n\tlet points = [];\r\n\tlet lines = [];\r\n\tlet mouse_has_moved = true;\r\n\tlet values_changed = true;\r\n\tlet is_drawing = false;\r\n\tlet is_pressing = false;\r\n\tlet lazy = null;\r\n\tlet canvas_container = null;\r\n\tlet canvas_observer = null;\r\n\tlet line_count = 0;\r\n\r\n\tfunction draw_cropped_image() {\r\n\t\tif (!shape) {\r\n\t\t\tctx.temp.drawImage(value_img, 0, 0, width, height);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet _width = value_img.naturalWidth;\r\n\t\tlet _height = value_img.naturalHeight;\r\n\r\n\t\tconst shape_ratio = shape[0] / shape[1];\r\n\t\tconst image_ratio = _width / _height;\r\n\r\n\t\tlet x = 0;\r\n\t\tlet y = 0;\r\n\r\n\t\tif (shape_ratio < image_ratio) {\r\n\t\t\t_width = shape[1] * image_ratio;\r\n\t\t\t_height = shape[1];\r\n\t\t\tx = (shape[0] - _width) / 2;\r\n\t\t} else if (shape_ratio > image_ratio) {\r\n\t\t\t_width = shape[0];\r\n\t\t\t_height = shape[0] / image_ratio;\r\n\t\t\ty = (shape[1] - _height) / 2;\r\n\t\t} else {\r\n\t\t\tx = 0;\r\n\t\t\ty = 0;\r\n\t\t\t_width = shape[0];\r\n\t\t\t_height = shape[1];\r\n\t\t}\r\n\r\n\t\tctx.temp.drawImage(value_img, x, y, _width, _height);\r\n\t}\r\n\r\n\tonMount(async () => {\r\n\t\tObject.keys(canvas).forEach((key) => {\r\n\t\t\tctx[key] = canvas[key].getContext(\"2d\");\r\n\t\t});\r\n\r\n\t\tawait tick();\r\n\r\n\t\tif (value_img) {\r\n\t\t\tvalue_img.addEventListener(\"load\", (_) => {\r\n\t\t\t\tif (source === \"webcam\") {\r\n\t\t\t\t\tctx.temp.save();\r\n\t\t\t\t\tctx.temp.translate(width, 0);\r\n\t\t\t\t\tctx.temp.scale(-1, 1);\r\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\r\n\t\t\t\t\tctx.temp.restore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdraw_cropped_image();\r\n\t\t\t\t}\r\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n\t\t\t\ttrigger_on_change();\r\n\t\t\t});\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (source === \"webcam\") {\r\n\t\t\t\t\tctx.temp.save();\r\n\t\t\t\t\tctx.temp.translate(width, 0);\r\n\t\t\t\t\tctx.temp.scale(-1, 1);\r\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\r\n\t\t\t\t\tctx.temp.restore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdraw_cropped_image();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n\t\t\t\tdraw_lines({ lines: lines.slice() });\r\n\t\t\t\ttrigger_on_change();\r\n\t\t\t}, 100);\r\n\t\t}\r\n\r\n\t\tlazy = new LazyBrush({\r\n\t\t\tradius: brush_radius * 0.05,\r\n\t\t\tenabled: true,\r\n\t\t\tinitialPoint: {\r\n\t\t\t\tx: width / 2,\r\n\t\t\t\ty: height / 2\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcanvas_observer = new ResizeObserver((entries, observer, ...rest) => {\r\n\t\t\thandle_canvas_resize(entries, observer);\r\n\t\t});\r\n\t\tcanvas_observer.observe(canvas_container);\r\n\r\n\t\tloop();\r\n\t\tmounted = true;\r\n\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tinit();\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tclear();\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\n\tfunction init() {\r\n\t\tconst initX = width / 2;\r\n\t\tconst initY = height / 2;\r\n\t\tlazy.update({ x: initX, y: initY }, { both: true });\r\n\t\tlazy.update({ x: initX, y: initY }, { both: false });\r\n\t\tmouse_has_moved = true;\r\n\t\tvalues_changed = true;\r\n\t}\r\n\r\n\tonDestroy(() => {\r\n\t\tmounted = false;\r\n\t\tcanvas_observer.unobserve(canvas_container);\r\n\t});\r\n\r\n\texport function undo() {\r\n\t\tconst _lines = lines.slice(0, -1);\r\n\r\n\t\tclear_canvas();\r\n\r\n\t\tif (value_img) {\r\n\t\t\tif (source === \"webcam\") {\r\n\t\t\t\tctx.temp.save();\r\n\t\t\t\tctx.temp.translate(width, 0);\r\n\t\t\t\tctx.temp.scale(-1, 1);\r\n\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\r\n\t\t\t\tctx.temp.restore();\r\n\t\t\t} else {\r\n\t\t\t\tdraw_cropped_image();\r\n\t\t\t}\r\n\r\n\t\t\tif (!lines || !lines.length) {\r\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdraw_lines({ lines: _lines });\r\n\t\tline_count = _lines.length;\r\n\r\n\t\tif (lines.length) {\r\n\t\t\tlines = _lines;\r\n\t\t}\r\n\r\n\t\tif (lines.length == 0) {\r\n\t\t\tdispatch(\"clear\");\r\n\t\t}\r\n\t\ttrigger_on_change();\r\n\t}\r\n\r\n\tlet get_save_data = () => {\r\n\t\treturn JSON.stringify({\r\n\t\t\tlines: lines,\r\n\t\t\twidth: canvas_width,\r\n\t\t\theight: canvas_height\r\n\t\t});\r\n\t};\r\n\r\n\tlet draw_lines = ({ lines }) => {\r\n\t\tlines.forEach((line) => {\r\n\t\t\tconst { points: _points, brush_color, brush_radius } = line;\r\n\t\t\tdraw_points({\r\n\t\t\t\tpoints: _points,\r\n\t\t\t\tbrush_color,\r\n\t\t\t\tbrush_radius\r\n\t\t\t});\r\n\r\n\t\t\tif (mode === \"mask\") {\r\n\t\t\t\tdraw_fake_points({\r\n\t\t\t\t\tpoints: _points,\r\n\t\t\t\t\tbrush_color,\r\n\t\t\t\t\tbrush_radius\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tpoints = _points;\r\n\r\n\t\t\treturn;\r\n\t\t});\r\n\t\tsaveLine({ brush_color, brush_radius });\r\n\t\tif (mode === \"mask\") {\r\n\t\t\tsave_mask_line();\r\n\t\t}\r\n\t};\r\n\r\n\tlet handle_draw_start = (e) => {\r\n\t\te.preventDefault();\r\n\t\tis_pressing = true;\r\n\t\tconst { x, y } = get_pointer_pos(e);\r\n\t\tif (e.touches && e.touches.length > 0) {\r\n\t\t\tlazy.update({ x, y }, { both: true });\r\n\t\t}\r\n\t\thandle_pointer_move(x, y);\r\n\t\tline_count += 1;\r\n\t};\r\n\r\n\tlet handle_draw_move = (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst { x, y } = get_pointer_pos(e);\r\n\t\thandle_pointer_move(x, y);\r\n\t};\r\n\r\n\tlet handle_draw_end = (e) => {\r\n\t\te.preventDefault();\r\n\t\thandle_draw_move(e);\r\n\t\tis_drawing = false;\r\n\t\tis_pressing = false;\r\n\t\tsaveLine();\r\n\r\n\t\tif (mode === \"mask\") {\r\n\t\t\tsave_mask_line();\r\n\t\t}\r\n\t};\r\n\r\n\tlet old_width = 0;\r\n\tlet old_height = 0;\r\n\tlet old_container_height = 0;\r\n\tlet add_lr_border = false;\r\n\r\n\tlet handle_canvas_resize = async () => {\r\n\t\tif (shape && canvas_container) {\r\n\t\t\tconst x = canvas_container?.getBoundingClientRect();\r\n\t\t\tconst shape_ratio = shape[0] / shape[1];\r\n\t\t\tconst container_ratio = x.width / x.height;\r\n\t\t\tadd_lr_border = shape_ratio < container_ratio;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\twidth === old_width &&\r\n\t\t\theight === old_height &&\r\n\t\t\told_container_height === container_height\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst dimensions = { width: width, height: height };\r\n\r\n\t\tconst container_dimensions = {\r\n\t\t\theight: container_height,\r\n\t\t\twidth: container_height * (dimensions.width / dimensions.height)\r\n\t\t};\r\n\r\n\t\tawait Promise.all([\r\n\t\t\tset_canvas_size(canvas.interface, dimensions, container_dimensions),\r\n\t\t\tset_canvas_size(canvas.drawing, dimensions, container_dimensions),\r\n\t\t\tset_canvas_size(canvas.temp, dimensions, container_dimensions),\r\n\t\t\tset_canvas_size(canvas.temp_fake, dimensions, container_dimensions),\r\n\t\t\tset_canvas_size(canvas.mask, dimensions, container_dimensions, false)\r\n\t\t]);\r\n\r\n\t\tif (!brush_radius) {\r\n\t\t\tbrush_radius = 20 * (dimensions.width / container_dimensions.width);\r\n\t\t}\r\n\r\n\t\tloop({ once: true });\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\told_height = height;\r\n\t\t\told_width = width;\r\n\t\t\told_container_height = container_height;\r\n\t\t}, 10);\r\n\t\tawait tick();\r\n\r\n\t\tclear();\r\n\t};\r\n\r\n\t$: {\r\n\t\tif (lazy) {\r\n\t\t\tinit();\r\n\t\t\tlazy.setRadius(brush_radius * 0.05);\r\n\t\t}\r\n\t}\r\n\r\n\t$: {\r\n\t\tif (width || height) {\r\n\t\t\thandle_canvas_resize();\r\n\t\t}\r\n\t}\r\n\r\n\tlet set_canvas_size = async (canvas, dimensions, container, scale = true) => {\r\n\t\tif (!mounted) return;\r\n\t\tawait tick();\r\n\r\n\t\tconst dpr = window.devicePixelRatio || 1;\r\n\t\tcanvas.width = dimensions.width * (scale ? dpr : 1);\r\n\t\tcanvas.height = dimensions.height * (scale ? dpr : 1);\r\n\r\n\t\tconst ctx = canvas.getContext(\"2d\");\r\n\t\tscale && ctx.scale(dpr, dpr);\r\n\r\n\t\tcanvas.style.width = `${container.width}px`;\r\n\t\tcanvas.style.height = `${container.height}px`;\r\n\t};\r\n\r\n\tlet get_pointer_pos = (e) => {\r\n\t\tconst rect = canvas.interface.getBoundingClientRect();\r\n\r\n\t\tlet clientX = e.clientX;\r\n\t\tlet clientY = e.clientY;\r\n\t\tif (e.changedTouches && e.changedTouches.length > 0) {\r\n\t\t\tclientX = e.changedTouches[0].clientX;\r\n\t\t\tclientY = e.changedTouches[0].clientY;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: ((clientX - rect.left) / rect.width) * width,\r\n\t\t\ty: ((clientY - rect.top) / rect.height) * height\r\n\t\t};\r\n\t};\r\n\r\n\tlet handle_pointer_move = (x, y) => {\r\n\t\tlazy.update({ x: x, y: y });\r\n\t\tconst is_disabled = !lazy.isEnabled();\r\n\t\tif ((is_pressing && !is_drawing) || (is_disabled && is_pressing)) {\r\n\t\t\tis_drawing = true;\r\n\t\t\tpoints.push(lazy.brush.toObject());\r\n\t\t}\r\n\t\tif (is_drawing) {\r\n\t\t\tpoints.push(lazy.brush.toObject());\r\n\t\t\tdraw_points({\r\n\t\t\t\tpoints: points,\r\n\t\t\t\tbrush_color,\r\n\t\t\t\tbrush_radius\r\n\t\t\t});\r\n\r\n\t\t\tif (mode === \"mask\") {\r\n\t\t\t\tdraw_fake_points({\r\n\t\t\t\t\tpoints: points,\r\n\t\t\t\t\tbrush_color,\r\n\t\t\t\t\tbrush_radius\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tmouse_has_moved = true;\r\n\t};\r\n\r\n\tlet draw_points = ({ points, brush_color, brush_radius }) => {\r\n\t\tif (!points || points.length < 2) return;\r\n\t\tctx.temp.lineJoin = \"round\";\r\n\t\tctx.temp.lineCap = \"round\";\r\n\r\n\t\tctx.temp.strokeStyle = brush_color;\r\n\t\tctx.temp.lineWidth = brush_radius;\r\n\t\tif (!points || points.length < 2) return;\r\n\t\tlet p1 = points[0];\r\n\t\tlet p2 = points[1];\r\n\t\tctx.temp.moveTo(p2.x, p2.y);\r\n\t\tctx.temp.beginPath();\r\n\t\tfor (var i = 1, len = points.length; i < len; i++) {\r\n\t\t\tvar midPoint = mid_point(p1, p2);\r\n\t\t\tctx.temp.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\r\n\t\t\tp1 = points[i];\r\n\t\t\tp2 = points[i + 1];\r\n\t\t}\r\n\r\n\t\tctx.temp.lineTo(p1.x, p1.y);\r\n\t\tctx.temp.stroke();\r\n\t};\r\n\r\n\tlet draw_fake_points = ({ points, brush_color, brush_radius }) => {\r\n\t\tif (!points || points.length < 2) return;\r\n\r\n\t\tctx.temp_fake.lineJoin = \"round\";\r\n\t\tctx.temp_fake.lineCap = \"round\";\r\n\t\tctx.temp_fake.strokeStyle = \"#fff\";\r\n\t\tctx.temp_fake.lineWidth = brush_radius;\r\n\t\tlet p1 = points[0];\r\n\t\tlet p2 = points[1];\r\n\t\tctx.temp_fake.moveTo(p2.x, p2.y);\r\n\t\tctx.temp_fake.beginPath();\r\n\t\tfor (var i = 1, len = points.length; i < len; i++) {\r\n\t\t\tvar midPoint = mid_point(p1, p2);\r\n\t\t\tctx.temp_fake.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\r\n\t\t\tp1 = points[i];\r\n\t\t\tp2 = points[i + 1];\r\n\t\t}\r\n\r\n\t\tctx.temp_fake.lineTo(p1.x, p1.y);\r\n\t\tctx.temp_fake.stroke();\r\n\t};\r\n\r\n\tlet save_mask_line = () => {\r\n\t\tif (points.length < 1) return;\r\n\t\tpoints.length = 0;\r\n\t\tctx.mask.drawImage(canvas.temp_fake, 0, 0, width, height);\r\n\r\n\t\ttrigger_on_change();\r\n\t};\r\n\r\n\tlet saveLine = () => {\r\n\t\tif (points.length < 1) return;\r\n\r\n\t\tlines.push({\r\n\t\t\tpoints: points.slice(),\r\n\t\t\tbrush_color: brush_color,\r\n\t\t\tbrush_radius\r\n\t\t});\r\n\r\n\t\tif (mode !== \"mask\") {\r\n\t\t\tpoints.length = 0;\r\n\t\t}\r\n\r\n\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n\t\ttrigger_on_change();\r\n\t};\r\n\r\n\tlet trigger_on_change = () => {\r\n\t\tconst x = get_image_data();\r\n\t\tdispatch(\"change\", x);\r\n\t};\r\n\r\n\texport function clear() {\r\n\t\tlines = [];\r\n\t\tclear_canvas();\r\n\t\tline_count = 0;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction clear_canvas() {\r\n\t\tvalues_changed = true;\r\n\t\tctx.temp.clearRect(0, 0, width, height);\r\n\r\n\t\tctx.temp.fillStyle = mode === \"mask\" ? \"transparent\" : \"#FFFFFF\";\r\n\t\tctx.temp.fillRect(0, 0, width, height);\r\n\r\n\t\tif (mode === \"mask\") {\r\n\t\t\tctx.temp_fake.clearRect(\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tcanvas.temp_fake.width,\r\n\t\t\t\tcanvas.temp_fake.height\r\n\t\t\t);\r\n\t\t\tctx.mask.clearRect(0, 0, width, height);\r\n\t\t\tctx.mask.fillStyle = \"#000\";\r\n\t\t\tctx.mask.fillRect(0, 0, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\tlet loop = ({ once = false } = {}) => {\r\n\t\tif (mouse_has_moved || values_changed) {\r\n\t\t\tconst pointer = lazy.getPointerCoordinates();\r\n\t\t\tconst brush = lazy.getBrushCoordinates();\r\n\t\t\tdraw_interface(ctx.interface, pointer, brush);\r\n\t\t\tmouse_has_moved = false;\r\n\t\t\tvalues_changed = false;\r\n\t\t}\r\n\t\tif (!once) {\r\n\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\tloop();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$: brush_dot = brush_radius * 0.075;\r\n\r\n\tlet draw_interface = (ctx, pointer, brush) => {\r\n\t\tctx.clearRect(0, 0, width, height);\r\n\r\n\t\t// brush preview\r\n\t\tctx.beginPath();\r\n\t\tctx.fillStyle = brush_color;\r\n\t\tctx.arc(brush.x, brush.y, brush_radius / 2, 0, Math.PI * 2, true);\r\n\t\tctx.fill();\r\n\r\n\t\t// tiny brush point dot\r\n\t\tctx.beginPath();\r\n\t\tctx.fillStyle = catenary_color;\r\n\t\tctx.arc(brush.x, brush.y, brush_dot, 0, Math.PI * 2, true);\r\n\t\tctx.fill();\r\n\t};\r\n\r\n\texport function get_image_data() {\r\n\t\treturn mode === \"mask\"\r\n\t\t\t? canvas.mask.toDataURL(\"image/jpg\")\r\n\t\t\t: canvas.drawing.toDataURL(\"image/jpg\");\r\n\t}\r\n</script>\r\n\r\n<div\r\n\tclass=\"wrap\"\r\n\tbind:this={canvas_container}\r\n\tbind:offsetWidth={canvas_width}\r\n\tbind:offsetHeight={canvas_height}\r\n>\r\n\t{#if line_count === 0}\r\n\t\t<div transition:fade={{ duration: 50 }} class=\"start-prompt\">\r\n\t\t\tStart drawing\r\n\t\t</div>\r\n\t{/if}\r\n\t{#each canvas_types as { name, zIndex }}\r\n\t\t<canvas\r\n\t\t\tkey={name}\r\n\t\t\tstyle=\" z-index:{zIndex};\"\r\n\t\t\tclass:lr={add_lr_border}\r\n\t\t\tclass:tb={!add_lr_border}\r\n\t\t\tbind:this={canvas[name]}\r\n\t\t\ton:mousedown={name === \"interface\" ? handle_draw_start : undefined}\r\n\t\t\ton:mousemove={name === \"interface\" ? handle_draw_move : undefined}\r\n\t\t\ton:mouseup={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:mouseout={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:blur={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:touchstart={name === \"interface\" ? handle_draw_start : undefined}\r\n\t\t\ton:touchmove={name === \"interface\" ? handle_draw_move : undefined}\r\n\t\t\ton:touchend={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:touchcancel={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:click|stopPropagation\r\n\t\t/>\r\n\t{/each}\r\n</div>\r\n\r\n<style>\r\n\tcanvas {\r\n\t\tdisplay: block;\r\n\t\tposition: absolute;\r\n\t\ttop: 0px;\r\n\t\tright: 0px;\r\n\t\tbottom: 0px;\r\n\t\tleft: 0px;\r\n\t\tmargin: auto;\r\n\t}\r\n\r\n\t.lr {\r\n\t\tborder-right: 1px solid var(--border-color-primary);\r\n\t\tborder-left: 1px solid var(--border-color-primary);\r\n\t}\r\n\r\n\t.tb {\r\n\t\tborder-top: 1px solid var(--border-color-primary);\r\n\t\tborder-bottom: 1px solid var(--border-color-primary);\r\n\t}\r\n\r\n\tcanvas:hover {\r\n\t\tcursor: none;\r\n\t}\r\n\r\n\t.wrap {\r\n\t\tposition: relative;\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t\ttouch-action: none;\r\n\t}\r\n\r\n\t.start-prompt {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\ttop: 0px;\r\n\t\tright: 0px;\r\n\t\tbottom: 0px;\r\n\t\tleft: 0px;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tz-index: var(--layer-4);\r\n\t\ttouch-action: none;\r\n\t\tpointer-events: none;\r\n\t\tcolor: var(--body-text-color-subdued);\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { IconButton } from \"@gradio/atoms\";\r\n\timport { Undo, Clear } from \"@gradio/icons\";\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n</script>\r\n\r\n<div>\r\n\t<IconButton Icon={Undo} label=\"Undo\" on:click={() => dispatch(\"undo\")} />\r\n\t<IconButton\r\n\t\tIcon={Clear}\r\n\t\tlabel=\"Clear\"\r\n\t\ton:click={(event) => {\r\n\t\t\tdispatch(\"clear\");\r\n\t\t\tevent.stopPropagation();\r\n\t\t}}\r\n\t/>\r\n</div>\r\n\r\n<style>\r\n\tdiv {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\ttop: var(--size-2);\r\n\t\tright: var(--size-2);\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: var(--spacing-sm);\r\n\t\tz-index: var(--layer-5);\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { IconButton } from \"@gradio/atoms\";\r\n\timport { Brush, Color } from \"@gradio/icons\";\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tlet show_size = false;\r\n\tlet show_col = false;\r\n\r\n\texport let brush_radius = 20;\r\n\texport let brush_color = \"#000\";\r\n\texport let container_height: number;\r\n\texport let img_width: number;\r\n\texport let img_height: number;\r\n\texport let mode: \"mask\" | \"other\" = \"other\";\r\n\r\n\t$: width = container_height * (img_width / img_height);\r\n</script>\r\n\r\n<div class=\"wrap\">\r\n\t<span class=\"brush\">\r\n\t\t<IconButton\r\n\t\t\tIcon={Brush}\r\n\t\t\tlabel=\"Use brush\"\r\n\t\t\ton:click={() => (show_size = !show_size)}\r\n\t\t/>\r\n\t\t{#if show_size}\r\n\t\t\t<input\r\n\t\t\t\taria-label=\"Brush radius\"\r\n\t\t\t\tbind:value={brush_radius}\r\n\t\t\t\ttype=\"range\"\r\n\t\t\t\tmin={0.5 * (img_width / width)}\r\n\t\t\t\tmax={75 * (img_width / width)}\r\n\t\t\t/>\r\n\t\t{/if}\r\n\t</span>\r\n\r\n\t{#if mode !== \"mask\"}\r\n\t\t<span class=\"col\">\r\n\t\t\t<IconButton\r\n\t\t\t\tIcon={Color}\r\n\t\t\t\tlabel=\"Select brush color\"\r\n\t\t\t\ton:click={() => (show_col = !show_col)}\r\n\t\t\t/>\r\n\t\t\t{#if show_col}\r\n\t\t\t\t<input aria-label=\"Brush color\" bind:value={brush_color} type=\"color\" />\r\n\t\t\t{/if}\r\n\t\t</span>\r\n\t{/if}\r\n</div>\r\n\r\n<style>\r\n\t.wrap {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\ttop: var(--size-10);\r\n\t\tright: var(--size-2);\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: var(--spacing-sm);\r\n\t\tz-index: var(--layer-5);\r\n\t}\r\n\t.brush {\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t}\r\n\r\n\t.brush input {\r\n\t\tposition: absolute;\r\n\t\ttop: 3px;\r\n\t\tright: calc(100% + 5px);\r\n\t}\r\n\r\n\t.col input {\r\n\t\tposition: absolute;\r\n\t\tright: calc(100% + 5px);\r\n\t\tbottom: -4px;\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\t// @ts-nocheck\r\n\timport { createEventDispatcher, tick, onMount } from \"svelte\";\r\n\timport { BlockLabel } from \"@gradio/atoms\";\r\n\timport { Image, Sketch as SketchIcon } from \"@gradio/icons\";\r\n\timport type { SelectData } from \"@gradio/utils\";\r\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\r\n\r\n\timport Cropper from \"./Cropper.svelte\";\r\n\timport Sketch from \"./Sketch.svelte\";\r\n\timport Webcam from \"./Webcam.svelte\";\r\n\timport ModifySketch from \"./ModifySketch.svelte\";\r\n\timport SketchSettings from \"./SketchSettings.svelte\";\r\n\r\n\timport { Upload, ModifyUpload } from \"@gradio/upload\";\r\n\r\n\texport let value:\r\n\t\t| null\r\n\t\t| string\r\n\t\t| { image: string | null; mask: string | null };\r\n\texport let label: string | undefined = undefined;\r\n\texport let show_label: boolean;\r\n\r\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\r\n\texport let tool: \"editor\" | \"select\" | \"sketch\" | \"color-sketch\" = \"editor\";\r\n\texport let shape: [number, number];\r\n\texport let streaming: boolean = false;\r\n\texport let pending: boolean = false;\r\n\texport let mirror_webcam: boolean;\r\n\texport let brush_radius: number;\r\n\texport let selectable: boolean = false;\r\n\r\n\tlet sketch: Sketch;\r\n\tlet cropper: Cropper;\r\n\r\n\tif (\r\n\t\tvalue &&\r\n\t\t(source === \"upload\" || source === \"webcam\") &&\r\n\t\ttool === \"sketch\"\r\n\t) {\r\n\t\tvalue = { image: value as string, mask: null };\r\n\t}\r\n\r\n\tfunction handle_upload({ detail }: CustomEvent<string>) {\r\n\t\tif (tool === \"color-sketch\") {\r\n\t\t\tstatic_image = detail;\r\n\t\t} else {\r\n\t\t\tvalue =\r\n\t\t\t\t(source === \"upload\" || source === \"webcam\") && tool === \"sketch\"\r\n\t\t\t\t\t? { image: detail, mask: null }\r\n\t\t\t\t\t: detail;\r\n\t\t}\r\n\t\tdispatch(\"upload\", detail);\r\n\t}\r\n\r\n\tfunction handle_clear({ detail }: CustomEvent<null>) {\r\n\t\tvalue = null;\r\n\t\tstatic_image = undefined;\r\n\t\tdispatch(\"clear\");\r\n\t}\r\n\r\n\tasync function handle_save({ detail }: { detail: string }, initial) {\r\n\t\tif (mode === \"mask\") {\r\n\t\t\tif (source === \"webcam\" && initial) {\r\n\t\t\t\tvalue = {\r\n\t\t\t\t\timage: detail,\r\n\t\t\t\t\tmask: null\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tvalue = {\r\n\t\t\t\t\timage: typeof value === \"string\" ? value : value?.image || null,\r\n\t\t\t\t\tmask: detail\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\t(source === \"upload\" || source === \"webcam\") &&\r\n\t\t\ttool === \"sketch\"\r\n\t\t) {\r\n\t\t\tvalue = { image: detail, mask: null };\r\n\t\t} else {\r\n\t\t\tvalue = detail;\r\n\t\t}\r\n\r\n\t\tawait tick();\r\n\r\n\t\tdispatch(streaming ? \"stream\" : \"edit\");\r\n\t}\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: string | null;\r\n\t\tstream: string | null;\r\n\t\tedit: undefined;\r\n\t\tclear: undefined;\r\n\t\tdrag: boolean;\r\n\t\tupload: FileData;\r\n\t\tselect: SelectData;\r\n\t}>();\r\n\r\n\t$: dispatch(\"change\", value as string);\r\n\r\n\tlet dragging = false;\r\n\r\n\t$: dispatch(\"drag\", dragging);\r\n\r\n\tfunction handle_image_load(event: Event) {\r\n\t\tconst element = event.currentTarget as HTMLImageElement;\r\n\t\timg_width = element.naturalWidth;\r\n\t\timg_height = element.naturalHeight;\r\n\t\tcontainer_height = element.getBoundingClientRect().height;\r\n\t}\r\n\r\n\tasync function handle_sketch_clear() {\r\n\t\tsketch.clear();\r\n\t\tawait tick();\r\n\t\tvalue = null;\r\n\t\tstatic_image = undefined;\r\n\t}\r\n\r\n\tlet img_height = 0;\r\n\tlet img_width = 0;\r\n\tlet container_height = 0;\r\n\r\n\tlet mode;\r\n\r\n\t$: {\r\n\t\tif (source === \"canvas\" && tool === \"sketch\") {\r\n\t\t\tmode = \"bw-sketch\";\r\n\t\t} else if (tool === \"color-sketch\") {\r\n\t\t\tmode = \"color-sketch\";\r\n\t\t} else if (\r\n\t\t\t(source === \"upload\" || source === \"webcam\") &&\r\n\t\t\ttool === \"sketch\"\r\n\t\t) {\r\n\t\t\tmode = \"mask\";\r\n\t\t} else {\r\n\t\t\tmode = \"editor\";\r\n\t\t}\r\n\t}\r\n\r\n\t$: brush_color = mode == \"mask\" ? \"#000000\" : \"#000\";\r\n\r\n\tlet value_img;\r\n\tlet max_height;\r\n\tlet max_width;\r\n\r\n\tlet static_image = undefined;\r\n\r\n\t$: {\r\n\t\tif (value === null || (value.image === null && value.mask === null)) {\r\n\t\t\tstatic_image = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t$: {\r\n\t\tif (cropper) {\r\n\t\t\tif (value) {\r\n\t\t\t\tcropper.image = value;\r\n\t\t\t\tcropper.create();\r\n\t\t\t} else {\r\n\t\t\t\tcropper.destroy();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonMount(async () => {\r\n\t\tif (tool === \"color-sketch\" && value && typeof value === \"string\") {\r\n\t\t\tstatic_image = value;\r\n\t\t\tawait tick();\r\n\t\t\thandle_image_load({ currentTarget: value_img });\r\n\t\t}\r\n\t});\r\n\r\n\tconst handle_click = (evt: MouseEvent) => {\r\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\r\n\t\tif (coordinates) {\r\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<BlockLabel\r\n\t{show_label}\r\n\tIcon={source === \"canvas\" ? SketchIcon : Image}\r\n\tlabel={label || (source === \"canvas\" ? \"Sketch\" : \"Image\")}\r\n/>\r\n\r\n<div\r\n\tdata-testid=\"image\"\r\n\tclass=\"image-container\"\r\n\tbind:offsetHeight={max_height}\r\n\tbind:offsetWidth={max_width}\r\n>\r\n\t{#if source === \"upload\"}\r\n\t\t<Upload\r\n\t\t\tbind:dragging\r\n\t\t\tfiletype=\"image/*\"\r\n\t\t\ton:load={handle_upload}\r\n\t\t\tinclude_file_metadata={false}\r\n\t\t\tdisable_click={!!value}\r\n\t\t>\r\n\t\t\t{#if (value === null && !static_image) || streaming}\r\n\t\t\t\t<slot />\r\n\t\t\t{:else if tool === \"select\"}\r\n\t\t\t\t<Cropper bind:this={cropper} image={value} on:crop={handle_save} />\r\n\t\t\t\t<ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\r\n\t\t\t{:else if tool === \"editor\"}\r\n\t\t\t\t<ModifyUpload\r\n\t\t\t\t\ton:edit={() => (tool = \"select\")}\r\n\t\t\t\t\ton:clear={handle_clear}\r\n\t\t\t\t\teditable\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={value}\r\n\t\t\t\t\talt=\"\"\r\n\t\t\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\r\n\t\t\t\t\tclass:selectable\r\n\t\t\t\t\ton:click={handle_click}\r\n\t\t\t\t/>\r\n\t\t\t{:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\r\n\t\t\t\t{#key static_image}\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tbind:this={value_img}\r\n\t\t\t\t\t\tclass=\"absolute-img\"\r\n\t\t\t\t\t\tsrc={static_image || value?.image || value}\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\ton:load={handle_image_load}\r\n\t\t\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{/key}\r\n\t\t\t\t{#if img_width > 0}\r\n\t\t\t\t\t<Sketch\r\n\t\t\t\t\t\t{value}\r\n\t\t\t\t\t\tbind:this={sketch}\r\n\t\t\t\t\t\tbind:brush_radius\r\n\t\t\t\t\t\tbind:brush_color\r\n\t\t\t\t\t\ton:change={handle_save}\r\n\t\t\t\t\t\t{mode}\r\n\t\t\t\t\t\twidth={img_width || max_width}\r\n\t\t\t\t\t\theight={img_height || max_height}\r\n\t\t\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\t\t\t{value_img}\r\n\t\t\t\t\t\t{source}\r\n\t\t\t\t\t\t{shape}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ModifySketch\r\n\t\t\t\t\t\ton:undo={() => sketch.undo()}\r\n\t\t\t\t\t\ton:clear={handle_sketch_clear}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{#if tool === \"color-sketch\" || tool === \"sketch\"}\r\n\t\t\t\t\t\t<SketchSettings\r\n\t\t\t\t\t\t\tbind:brush_radius\r\n\t\t\t\t\t\t\tbind:brush_color\r\n\t\t\t\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\t\t\t\timg_width={img_width || max_width}\r\n\t\t\t\t\t\t\timg_height={img_height || max_height}\r\n\t\t\t\t\t\t\t{mode}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t{/if}\r\n\t\t\t{:else}\r\n\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={value.image || value}\r\n\t\t\t\t\talt=\"hello\"\r\n\t\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t\t\t\tclass:selectable\r\n\t\t\t\t\ton:click={handle_click}\r\n\t\t\t\t/>\r\n\t\t\t{/if}\r\n\t\t</Upload>\r\n\t{:else if source === \"canvas\"}\r\n\t\t<ModifySketch\r\n\t\t\ton:undo={() => sketch.undo()}\r\n\t\t\ton:clear={handle_sketch_clear}\r\n\t\t/>\r\n\t\t{#if tool === \"color-sketch\"}\r\n\t\t\t<SketchSettings\r\n\t\t\t\tbind:brush_radius\r\n\t\t\t\tbind:brush_color\r\n\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\timg_width={img_width || max_width}\r\n\t\t\t\timg_height={img_height || max_height}\r\n\t\t\t/>\r\n\t\t{/if}\r\n\t\t<Sketch\r\n\t\t\t{value}\r\n\t\t\tbind:brush_radius\r\n\t\t\tbind:brush_color\r\n\t\t\tbind:this={sketch}\r\n\t\t\ton:change={handle_save}\r\n\t\t\ton:clear={handle_sketch_clear}\r\n\t\t\t{mode}\r\n\t\t\twidth={img_width || max_width}\r\n\t\t\theight={img_height || max_height}\r\n\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t{shape}\r\n\t\t/>\r\n\t{:else if (value === null && !static_image) || streaming}\r\n\t\t{#if source === \"webcam\" && !static_image}\r\n\t\t\t<Webcam\r\n\t\t\t\ton:capture={(e) =>\r\n\t\t\t\t\ttool === \"color-sketch\" ? handle_upload(e) : handle_save(e, true)}\r\n\t\t\t\ton:stream={handle_save}\r\n\t\t\t\ton:error\r\n\t\t\t\t{streaming}\r\n\t\t\t\t{pending}\r\n\t\t\t\t{mirror_webcam}\r\n\t\t\t/>\r\n\t\t{/if}\r\n\t{:else if tool === \"select\"}\r\n\t\t<Cropper bind:this={cropper} image={value} on:crop={handle_save} />\r\n\t\t<ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\r\n\t{:else if tool === \"editor\"}\r\n\t\t<ModifyUpload\r\n\t\t\ton:edit={() => (tool = \"select\")}\r\n\t\t\ton:clear={handle_clear}\r\n\t\t\teditable\r\n\t\t/>\r\n\r\n\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\r\n\t\t<img\r\n\t\t\tsrc={value}\r\n\t\t\talt=\"\"\r\n\t\t\tclass:selectable\r\n\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t\ton:click={handle_click}\r\n\t\t/>\r\n\t{:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\r\n\t\t{#key static_image}\r\n\t\t\t<img\r\n\t\t\t\tbind:this={value_img}\r\n\t\t\t\tclass=\"absolute-img\"\r\n\t\t\t\tsrc={static_image || value?.image || value}\r\n\t\t\t\talt=\"\"\r\n\t\t\t\ton:load={handle_image_load}\r\n\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t\t/>\r\n\t\t{/key}\r\n\t\t{#if img_width > 0}\r\n\t\t\t<Sketch\r\n\t\t\t\t{value}\r\n\t\t\t\tbind:this={sketch}\r\n\t\t\t\tbind:brush_radius\r\n\t\t\t\tbind:brush_color\r\n\t\t\t\ton:change={handle_save}\r\n\t\t\t\t{mode}\r\n\t\t\t\twidth={img_width || max_width}\r\n\t\t\t\theight={img_height || max_height}\r\n\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\t{value_img}\r\n\t\t\t\t{source}\r\n\t\t\t/>\r\n\t\t\t<ModifySketch\r\n\t\t\t\ton:undo={() => sketch.undo()}\r\n\t\t\t\ton:clear={handle_sketch_clear}\r\n\t\t\t/>\r\n\t\t\t{#if tool === \"color-sketch\" || tool === \"sketch\"}\r\n\t\t\t\t<SketchSettings\r\n\t\t\t\t\tbind:brush_radius\r\n\t\t\t\t\tbind:brush_color\r\n\t\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\t\timg_width={img_width || max_width}\r\n\t\t\t\t\timg_height={img_height || max_height}\r\n\t\t\t\t\t{mode}\r\n\t\t\t\t/>\r\n\t\t\t{/if}\r\n\t\t{/if}\r\n\t{:else}\r\n\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\r\n\t\t<img\r\n\t\t\tsrc={value.image || value}\r\n\t\t\talt=\"\"\r\n\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t\tclass:selectable\r\n\t\t\ton:click={handle_click}\r\n\t\t/>\r\n\t{/if}\r\n</div>\r\n\r\n<style>\r\n\t.image-container,\r\n\timg {\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t}\r\n\timg {\r\n\t\tobject-fit: contain;\r\n\t}\r\n\r\n\t.selectable {\r\n\t\tcursor: crosshair;\r\n\t}\r\n\r\n\t.absolute-img {\r\n\t\tposition: absolute;\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.webcam {\r\n\t\ttransform: scaleX(-1);\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport type { SelectData } from \"@gradio/utils\";\r\n\timport { BlockLabel, Empty, IconButton } from \"@gradio/atoms\";\r\n\timport { Download } from \"@gradio/icons\";\r\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\r\n\r\n\timport { Image } from \"@gradio/icons\";\r\n\r\n\texport let value: null | string;\r\n\texport let label: string | undefined = undefined;\r\n\texport let show_label: boolean;\r\n\texport let selectable: boolean = false;\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: string;\r\n\t\tselect: SelectData;\r\n\t}>();\r\n\r\n\t$: value && dispatch(\"change\", value);\r\n\r\n\tconst handle_click = (evt: MouseEvent) => {\r\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\r\n\t\tif (coordinates) {\r\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<BlockLabel {show_label} Icon={Image} label={label || \"Image\"} />\r\n{#if value === null}\r\n\t<Empty size=\"large\" unpadded_box={true}><Image /></Empty>\r\n{:else}\r\n\t<div class=\"download\">\r\n\t\t<a\r\n\t\t\thref={value}\r\n\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\r\n\t\t\tdownload={\"image\"}\r\n\t\t>\r\n\t\t\t<IconButton Icon={Download} label=\"Download\" />\r\n\t\t</a>\r\n\t</div>\r\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\r\n\t<img src={value} alt=\"\" class:selectable on:click={handle_click} />\r\n{/if}\r\n\r\n<style>\r\n\timg {\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t\tobject-fit: contain;\r\n\t}\r\n\r\n\t.selectable {\r\n\t\tcursor: crosshair;\r\n\t}\r\n\r\n\t.download {\r\n\t\tposition: absolute;\r\n\t\ttop: 6px;\r\n\t\tright: 6px;\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { Image, StaticImage } from \"@gradio/image\";\r\n\timport { Block } from \"@gradio/atoms\";\r\n\timport { _ } from \"svelte-i18n\";\r\n\timport { Component as StatusTracker } from \"../StatusTracker/\";\r\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\r\n\timport type { Styles } from \"@gradio/utils\";\r\n\timport UploadText from \"../UploadText.svelte\";\r\n\r\n\texport let elem_id: string = \"\";\r\n\texport let elem_classes: Array<string> = [];\r\n\texport let visible: boolean = true;\r\n\texport let value: null | string = null;\r\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\r\n\texport let tool: \"editor\" | \"select\" | \"sketch\" | \"color-sketch\" = \"editor\";\r\n\texport let label: string;\r\n\texport let show_label: boolean;\r\n\texport let streaming: boolean;\r\n\texport let pending: boolean;\r\n\texport let style: Styles = {};\r\n\texport let mirror_webcam: boolean;\r\n\texport let shape: [number, number];\r\n\texport let brush_radius: number;\r\n\texport let selectable: boolean = false;\r\n\r\n\texport let loading_status: LoadingStatus;\r\n\r\n\texport let mode: \"static\" | \"dynamic\";\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: undefined;\r\n\t}>();\r\n\r\n\t$: value, dispatch(\"change\");\r\n\tlet dragging: boolean;\r\n\tconst FIXED_HEIGHT = 240;\r\n\r\n\t$: value = !value ? null : value;\r\n</script>\r\n\r\n<Block\r\n\t{visible}\r\n\tvariant={mode === \"dynamic\" && value === null && source === \"upload\"\r\n\t\t? \"dashed\"\r\n\t\t: \"solid\"}\r\n\tborder_mode={dragging ? \"focus\" : \"base\"}\r\n\tpadding={false}\r\n\t{elem_id}\r\n\t{elem_classes}\r\n\tstyle={{\r\n\t\theight: style.height || (source === \"webcam\" ? undefined : FIXED_HEIGHT),\r\n\t\twidth: style.width\r\n\t}}\r\n\tallow_overflow={false}\r\n>\r\n\t<StatusTracker {...loading_status} />\r\n\t{#if mode === \"static\"}\r\n\t\t<StaticImage on:select {value} {label} {show_label} {selectable} />\r\n\t{:else}\r\n\t\t<Image\r\n\t\t\t{brush_radius}\r\n\t\t\t{shape}\r\n\t\t\tbind:value\r\n\t\t\t{source}\r\n\t\t\t{tool}\r\n\t\t\t{selectable}\r\n\t\t\ton:edit\r\n\t\t\ton:clear\r\n\t\t\ton:change\r\n\t\t\ton:stream\r\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\r\n\t\t\ton:upload\r\n\t\t\ton:select\r\n\t\t\ton:error={({ detail }) => {\r\n\t\t\t\tloading_status = loading_status || {};\r\n\t\t\t\tloading_status.status = \"error\";\r\n\t\t\t\tloading_status.message = detail;\r\n\t\t\t}}\r\n\t\t\t{label}\r\n\t\t\t{show_label}\r\n\t\t\t{pending}\r\n\t\t\t{streaming}\r\n\t\t\t{mirror_webcam}\r\n\t\t>\r\n\t\t\t<UploadText type=\"image\" />\r\n\t\t</Image>\r\n\t{/if}\r\n</Block>\r\n","export { default as Component } from \"./Image.svelte\";\r\nexport { default as ExampleComponent } from \"../Dataset/ExampleComponents/Image.svelte\";\r\nexport const modes = [\"static\", \"dynamic\"];\r\n\r\nexport const document = (config: Record<string, any>) => ({\r\n\ttype: {\r\n\t\tpayload: \"string\"\r\n\t},\r\n\tdescription: {\r\n\t\tpayload: \"image data as base64 string\"\r\n\t},\r\n\texample_data:\r\n\t\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==\"\r\n});\r\n"],"names":["insert","target","svg","anchor","append","path0","path1","circle0","circle1","circle2","circle3","circle4","path","get_coordinates_of_clicked_image","evt","image","imageRect","xScale","yScale","displayed_height","y_offset","x","y","displayed_width","x_offset","ctx","attr","img","img_src_value","$$props","el","dispatch","createEventDispatcher","cropper","destroy","create","Cropper","image_data","$$value","Point","LazyPoint","point","angle","distance","angleRotated","diff","RADIUS_DEFAULT","LazyBrush","radius","enabled","initialPoint","newPointerPoint","both","div","div_transition","create_bidirectional_transition","fade","canvas_1","listen","if_block","create_if_block","i","catenary_color","mid_point","p1","p2","value","value_img","mode","brush_color","brush_radius","source","width","height","container_height","shape","mounted","canvas_width","canvas_height","last_value_img","canvas_types","canvas","points","lines","mouse_has_moved","values_changed","is_drawing","is_pressing","lazy","canvas_container","canvas_observer","line_count","draw_cropped_image","_width","_height","shape_ratio","image_ratio","onMount","key","tick","_","trigger_on_change","draw_lines","$$invalidate","ResizeObserver","entries","observer","rest","handle_canvas_resize","loop","init","clear","initX","initY","onDestroy","undo","_lines","clear_canvas","line","_points","draw_points","draw_fake_points","saveLine","save_mask_line","handle_draw_start","e","get_pointer_pos","handle_pointer_move","handle_draw_move","handle_draw_end","old_width","old_height","old_container_height","add_lr_border","container_ratio","dimensions","container_dimensions","set_canvas_size","container","scale","dpr","rect","clientX","clientY","is_disabled","len","midPoint","get_image_data","once","pointer","brush","draw_interface","brush_dot","name","Undo","Clear","event","input","Color","create_if_block_1","span","Brush","create_if_block_2","if_block1","show_size","show_col","img_width","img_height","click_handler","to_number","click_handler_1","create_if_block_14","create_if_block_10","create_if_block_8","dirty","sketch_1_changes","src_url_equal","create_if_block_15","sketchsettings_changes","create_if_block_5","create_if_block_6","SketchIcon","Image","blocklabel_changes","label","show_label","tool","streaming","pending","mirror_webcam","selectable","sketch","handle_upload","detail","static_image","handle_clear","handle_save","initial","dragging","handle_image_load","element","handle_sketch_clear","max_height","max_width","handle_click","coordinates","clear_handler","edit_handler","undo_handler","undo_handler_1","clear_handler_1","edit_handler_1","undo_handler_2","Download","a","FIXED_HEIGHT","elem_id","elem_classes","visible","style","loading_status","modes","document","config"],"mappings":"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","x_google_ignoreList":[5,6,7]}