{"version":3,"file":"index.b40f6a1e.js","sources":["../../../../ui/packages/form/src/MultiSelect.svelte","../../../../ui/packages/form/src/Dropdown.svelte","../../../../ui/packages/app/src/components/Dropdown/Dropdown.svelte","../../../../ui/packages/app/src/components/Dropdown/index.ts"],"sourcesContent":["<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { fly } from \"svelte/transition\";\r\n\texport let placeholder = \"\";\r\n\texport let label: string;\r\n\texport let value: string | Array<string> | undefined = undefined;\r\n\texport let multiselect: boolean = false;\r\n\texport let choices: Array<string>;\r\n\texport let disabled: boolean = false;\r\n\texport let show_label: boolean;\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: string | Array<string> | undefined;\r\n\t}>();\r\n\r\n\tlet inputValue: string,\r\n\t\tactiveOption: string,\r\n\t\tshowOptions = false;\r\n\r\n\t$: filtered = choices.filter((o) =>\r\n\t\tinputValue ? o.toLowerCase().includes(inputValue.toLowerCase()) : o\r\n\t);\r\n\t$: if (\r\n\t\t(activeOption && !filtered.includes(activeOption)) ||\r\n\t\t(!activeOption && inputValue)\r\n\t)\r\n\t\tactiveOption = filtered[0];\r\n\r\n\tconst iconClearPath =\r\n\t\t\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\";\r\n\r\n\tconst iconCheckMarkPath =\r\n\t\t\"M 2.328125 4.222656 L 27.734375 4.222656 L 27.734375 24.542969 L 2.328125 24.542969 Z M 2.328125 4.222656\";\r\n\r\n\tfunction add(option: string) {\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tvalue.push(option);\r\n\t\t\tdispatch(\"change\", value);\r\n\t\t}\r\n\t\tvalue = value;\r\n\t}\r\n\r\n\tfunction remove(option: string) {\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tvalue = value.filter((v: string) => v !== option);\r\n\t\t\tdispatch(\"change\", value);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction optionsVisibility(show: boolean) {\r\n\t\tif (typeof show === \"boolean\") {\r\n\t\t\tshowOptions = show;\r\n\t\t} else {\r\n\t\t\tshowOptions = !showOptions;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleBlur(e: any) {\r\n\t\toptionsVisibility(false);\r\n\t}\r\n\r\n\tfunction handleKeyup(e: any) {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\tif (Array.isArray(value) && activeOption != undefined) {\r\n\t\t\t\tvalue.includes(activeOption) ? remove(activeOption) : add(activeOption);\r\n\t\t\t\tinputValue = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (e.key === \"ArrowUp\" || e.key === \"ArrowDown\") {\r\n\t\t\tconst increment = e.key === \"ArrowUp\" ? -1 : 1;\r\n\t\t\tconst calcIndex = filtered.indexOf(activeOption) + increment;\r\n\t\t\tactiveOption =\r\n\t\t\t\tcalcIndex < 0\r\n\t\t\t\t\t? filtered[filtered.length - 1]\r\n\t\t\t\t\t: calcIndex === filtered.length\r\n\t\t\t\t\t? filtered[0]\r\n\t\t\t\t\t: filtered[calcIndex];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleTokenClick(e: any) {\r\n\t\te.preventDefault();\r\n\t\tif (e.target.closest(\".token-remove\")) {\r\n\t\t\te.stopPropagation();\r\n\t\t\tremove(\r\n\t\t\t\te.target.closest(\".token\").getElementsByTagName(\"span\")[0].textContent\r\n\t\t\t);\r\n\t\t} else if (e.target.closest(\".remove-all\")) {\r\n\t\t\tvalue = [];\r\n\t\t\tinputValue = \"\";\r\n\t\t} else {\r\n\t\t\toptionsVisibility(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleOptionMousedown(e: any) {\r\n\t\tconst option = e.target.dataset.value;\r\n\t\tinputValue = \"\";\r\n\t\tif (option !== undefined) {\r\n\t\t\tif (value?.includes(option)) {\r\n\t\t\t\tremove(option);\r\n\t\t\t} else {\r\n\t\t\t\tadd(option);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"relative border rounded-md\">\r\n\t<div\r\n\t\tclass=\"items-center flex flex-wrap relative\"\r\n\t\tclass:showOptions\r\n\t\ton:click={handleTokenClick}\r\n\t>\r\n\t\t{#if Array.isArray(value)}\r\n\t\t\t{#each value as s}\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"token gr-input-label flex items-center text-gray-700 text-sm space-x-2 border py-1.5 px-3 rounded-lg cursor-pointer bg-white shadow-sm checked:shadow-inner my-1 mx-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass:hidden={disabled}\r\n\t\t\t\t\t\tclass=\"token-remove items-center bg-gray-400 dark:bg-gray-700 rounded-full fill-white flex justify-center min-w-min p-0.5\"\r\n\t\t\t\t\t\ttitle=\"Remove {s}\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tclass=\"icon-clear\"\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\twidth=\"16\"\r\n\t\t\t\t\t\t\theight=\"16\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d={iconClearPath} />\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<span>{s}</span>\r\n\t\t\t\t</div>\r\n\t\t\t{/each}\r\n\t\t{/if}\r\n\t\t<div class=\"items-center flex flex-1 min-w-min border-none\">\r\n\t\t\t<input\r\n\t\t\t\tclass=\"border-none bg-inherit ml-2 text-lg w-full outline-none text-gray-700 dark:text-white disabled:cursor-not-allowed\"\r\n\t\t\t\t{disabled}\r\n\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\tbind:value={inputValue}\r\n\t\t\t\ton:blur={handleBlur}\r\n\t\t\t\ton:keyup={handleKeyup}\r\n\t\t\t\t{placeholder}\r\n\t\t\t/>\r\n\t\t\t<div\r\n\t\t\t\tclass:hidden={!value?.length || disabled}\r\n\t\t\t\tclass=\"remove-all items-center bg-gray-400 dark:bg-gray-700 rounded-full fill-white flex justify-center h-5 ml-1 min-w-min disabled:hidden p-0.5\"\r\n\t\t\t\ttitle=\"Remove All\"\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\tclass=\"icon-clear\"\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\twidth=\"16\"\r\n\t\t\t\t\theight=\"16\"\r\n\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path d={iconClearPath} />\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t\t<svg\r\n\t\t\t\tclass=\"dropdown-arrow mr-2 min-w-min fill-gray-500 dark:fill-white\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\twidth=\"18\"\r\n\t\t\t\theight=\"18\"\r\n\t\t\t\tviewBox=\"0 0 18 18\"><path d=\"M5 8l4 4 4-4z\" /></svg\r\n\t\t\t>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t{#if showOptions && !disabled}\r\n\t\t<ul\r\n\t\t\tclass=\"z-50 shadow ml-0 list-none max-h-32 overflow-auto absolute w-full fill-gray-500 bg-white dark:bg-gray-700 dark:text-white rounded-md\"\r\n\t\t\ttransition:fly={{ duration: 200, y: 5 }}\r\n\t\t\ton:mousedown|preventDefault={handleOptionMousedown}\r\n\t\t>\r\n\t\t\t{#each filtered as choice}\r\n\t\t\t\t<li\r\n\t\t\t\t\tclass=\"cursor-pointer flex p-2 hover:bg-gray-100 dark:hover:bg-gray-600\"\r\n\t\t\t\t\tclass:selected={value?.includes(choice)}\r\n\t\t\t\t\tclass:active={activeOption === choice}\r\n\t\t\t\t\tclass:bg-gray-100={activeOption === choice}\r\n\t\t\t\t\tclass:dark:bg-gray-600={activeOption === choice}\r\n\t\t\t\t\tdata-value={choice}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span class:invisible={!value?.includes(choice)} class=\"pr-1\">âœ“</span>\r\n\t\t\t\t\t{choice}\r\n\t\t\t\t</li>\r\n\t\t\t{/each}\r\n\t\t</ul>\r\n\t{/if}\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport MultiSelect from \"./MultiSelect.svelte\";\r\n\timport { BlockTitle } from \"@gradio/atoms\";\r\n\texport let label: string;\r\n\texport let value: string | Array<string> | undefined = undefined;\r\n\texport let multiselect: boolean = false;\r\n\texport let choices: Array<string>;\r\n\texport let disabled: boolean = false;\r\n\texport let show_label: boolean;\r\n</script>\r\n\r\n<!-- svelte-ignore a11y-label-has-associated-control -->\r\n<label>\r\n\t<BlockTitle {show_label}>{label}</BlockTitle>\r\n\t{#if !multiselect}\r\n\t\t<select\r\n\t\t\tclass=\"gr-box gr-input w-full disabled:cursor-not-allowed\"\r\n\t\t\tbind:value\r\n\t\t\ton:change\r\n\t\t\t{disabled}\r\n\t\t>\r\n\t\t\t{#each choices as choice}\r\n\t\t\t\t<option>{choice}</option>\r\n\t\t\t{/each}\r\n\t\t</select>\r\n\t{:else}\r\n\t\t<MultiSelect\r\n\t\t\tbind:value\r\n\t\t\t{choices}\r\n\t\t\t{multiselect}\r\n\t\t\t{label}\r\n\t\t\t{show_label}\r\n\t\t\ton:change\r\n\t\t\t{disabled}\r\n\t\t/>\r\n\t{/if}\r\n</label>\r\n","<script lang=\"ts\">\r\n\timport { Dropdown } from \"@gradio/form\";\r\n\timport { Block } from \"@gradio/atoms\";\r\n\timport StatusTracker from \"../StatusTracker/StatusTracker.svelte\";\r\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\r\n\timport type { Styles } from \"@gradio/utils\";\r\n\r\n\texport let label: string = \"Dropdown\";\r\n\texport let elem_id: string = \"\";\r\n\texport let visible: boolean = true;\r\n\texport let value: string | Array<string> = [];\r\n\texport let multiselect: boolean = false;\r\n\texport let choices: Array<string>;\r\n\texport let show_label: boolean;\r\n\texport let style: Styles = {};\r\n\texport let loading_status: LoadingStatus;\r\n\r\n\texport let mode: \"static\" | \"dynamic\";\r\n</script>\r\n\r\n<Block\r\n\t{visible}\r\n\t{elem_id}\r\n\tdisable={typeof style.container === \"boolean\" && !style.container}\r\n>\r\n\t<StatusTracker {...loading_status} />\r\n\r\n\t<Dropdown\r\n\t\tbind:value\r\n\t\t{choices}\r\n\t\t{multiselect}\r\n\t\t{label}\r\n\t\t{show_label}\r\n\t\ton:change\r\n\t\tdisabled={mode === \"static\"}\r\n\t/>\r\n</Block>\r\n","export { default as Component } from \"./Dropdown.svelte\";\r\nexport const modes = [\"static\", \"dynamic\"];\r\n\r\nexport const document = (config: Record<string, any>) => ({\r\n\ttype: \"string\",\r\n\tdescription: \"selected choice\",\r\n\texample_data: config.choices.length ? config.choices[0] : \"\"\r\n});\r\n"],"names":[],"mappings":"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"}