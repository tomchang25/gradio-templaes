{"version":3,"file":"ModifyUpload.svelte_svelte_type_style_lang-ba6baa96.js","sources":["../../../../js/upload/src/utils.ts"],"sourcesContent":["import type { FileData } from \"./types\";\r\n\r\nexport function normalise_file(\r\n\tfile: string | FileData | null,\r\n\troot: string,\r\n\troot_url: string | null\r\n): FileData | null;\r\n\r\nexport function normalise_file(\r\n\tfile: Array<FileData> | null,\r\n\troot: string,\r\n\troot_url: string | null\r\n): Array<FileData> | null;\r\n\r\nexport function normalise_file(\r\n\tfile: Array<FileData> | FileData | null,\r\n\troot: string,\r\n\troot_url: string | null\r\n): Array<FileData> | FileData | null;\r\n\r\nexport function normalise_file(\r\n\tfile: Array<FileData> | FileData | string | null,\r\n\troot: string,\r\n\troot_url: string | null\r\n): Array<FileData> | FileData | null {\r\n\tif (file == null) return null;\r\n\tif (typeof file === \"string\") {\r\n\t\treturn {\r\n\t\t\tname: \"file_data\",\r\n\t\t\tdata: file\r\n\t\t};\r\n\t} else if (Array.isArray(file)) {\r\n\t\tconst normalized_file: Array<FileData | null> = [];\r\n\r\n\t\tfor (const x of file) {\r\n\t\t\tif (x === null) {\r\n\t\t\t\tnormalized_file.push(null);\r\n\t\t\t} else {\r\n\t\t\t\tnormalized_file.push(normalise_file(x, root, root_url));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn normalized_file as Array<FileData>;\r\n\t} else if (file.is_file) {\r\n\t\tif (root_url == null) {\r\n\t\t\tfile.data = root + \"/file=\" + file.name;\r\n\t\t} else {\r\n\t\t\tfile.data = \"/proxy=\" + root_url + \"/file=\" + file.name;\r\n\t\t}\r\n\t}\r\n\treturn file;\r\n}\r\n\r\nexport const blobToBase64 = (blob: File): Promise<string> => {\r\n\tconst reader = new FileReader();\r\n\treader.readAsDataURL(blob);\r\n\treturn new Promise((resolve) => {\r\n\t\treader.onloadend = () => {\r\n\t\t\tresolve(reader.result as string);\r\n\t\t};\r\n\t});\r\n};\r\n"],"names":["normalise_file","file","root","root_url","normalized_file","x","blobToBase64","blob","reader","resolve"],"mappings":"AAoBgB,SAAAA,EACfC,EACAC,EACAC,EACoC,CACpC,GAAIF,GAAQ,KAAa,OAAA,KACrB,GAAA,OAAOA,GAAS,SACZ,MAAA,CACN,KAAM,YACN,KAAMA,CAAA,EAEG,GAAA,MAAM,QAAQA,CAAI,EAAG,CAC/B,MAAMG,EAA0C,CAAA,EAEhD,UAAWC,KAAKJ,EACXI,IAAM,KACTD,EAAgB,KAAK,IAAI,EAEzBA,EAAgB,KAAKJ,EAAeK,EAAGH,EAAMC,CAAQ,CAAC,EAIjD,OAAAC,OACGH,EAAK,UACXE,GAAY,KACVF,EAAA,KAAOC,EAAO,SAAWD,EAAK,KAEnCA,EAAK,KAAO,UAAYE,EAAW,SAAWF,EAAK,MAG9C,OAAAA,CACR,CAEa,MAAAK,EAAgBC,GAAgC,CACtD,MAAAC,EAAS,IAAI,WACnB,OAAAA,EAAO,cAAcD,CAAI,EAClB,IAAI,QAASE,GAAY,CAC/BD,EAAO,UAAY,IAAM,CACxBC,EAAQD,EAAO,MAAgB,CAAA,CAChC,CACA,CACF"}